<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Money Garden</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<!-- Telegram -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
 font-family:'Segoe UI',sans-serif;
 background:linear-gradient(180deg,#0b0c1e,#10122a);
 color:#fff;
 padding-bottom:85px;
}

/* HEADER */
.header{
 background:linear-gradient(135deg,#a569bd,#f1948a);
 padding:30px 20px;
 border-radius:0 0 30px 30px;
 text-align:center;
}
.avatar{
 width:70px;height:70px;
 background:#58d68d;
 border-radius:50%;
 margin:auto;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:30px;
 font-weight:bold;
}
.balance-badge{
 margin-top:10px;
 background:rgba(255,255,255,.25);
 padding:8px 20px;
 border-radius:30px;
 display:inline-block;
}

/* PAGE */
.page{display:none;padding:15px}
.page.active{display:block}

/* CARD */
.card{
 background:#1c1d38;
 border-radius:20px;
 padding:18px;
 border:1px solid #2d2e4d;
 margin-bottom:15px;
}

/* GRID */
.grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:12px;
}
.box{
 background:#1c1d38;
 border-radius:18px;
 padding:15px;
 text-align:center;
 border:1px solid #2d2e4d;
}
.box i{
 font-size:26px;
 margin-bottom:8px;
 background:linear-gradient(135deg,#bb8fce,#f1948a);
 -webkit-background-clip:text;
 -webkit-text-fill-color:transparent;
}

.btn{
 background:linear-gradient(90deg,#bb8fce,#f1948a);
 border:none;
 width:100%;
 padding:12px;
 border-radius:12px;
 color:#fff;
 font-weight:bold;
 margin-top:10px;
}

/* INPUT */
input,select{
 width:100%;
 padding:14px;
 background:#0b0c1e;
 border:1px solid #2d2e4d;
 border-radius:12px;
 color:#fff;
 margin-bottom:12px;
}

/* NAV */
.nav{
 position:fixed;
 bottom:0;
 width:100%;
 background:#1c1d38;
 display:flex;
 border-top:1px solid #2d2e4d;
}
.nav div{
 flex:1;
 text-align:center;
 padding:10px;
 font-size:12px;
 color:#777;
}
.nav .active{color:#bb8fce}
.nav i{display:block;font-size:20px;margin-bottom:4px}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
 <div class="avatar" id="u-initial">U</div>
 <h3 id="u-name">User</h3>
 <div class="balance-badge">ব্যালেন্স: <span id="bal">0</span> TK</div>
</div>

<!-- HOME -->
<div id="home" class="page active">
 <div class="grid">
  <div class="box">
   <i class="fa-solid fa-rectangle-ad"></i>
   <p>বিজ্ঞাপন</p>
   <b id="ads">0/9</b>
  </div>
  <div class="box">
   <i class="fa-solid fa-users"></i>
   <p>রেফার</p>
   <b id="refs">0</b>
  </div>
 </div>

 <div class="card">
  <p>রেফার লিংক</p>
  <input id="refLink" readonly>
  <button class="btn" onclick="copyRef()">কপি করুন</button>
 </div>
</div>

<!-- SUPPORT -->
<div id="support" class="page">
 <div class="card">
  <button class="btn" onclick="openLink('https://t.me/YOUR_SUPPORT')">Telegram</button>
  <button class="btn" onclick="openLink('mailto:YOURMAIL@gmail.com')">Email</button>
  <button class="btn" onclick="openLink('https://t.me/YOUR_LIVECHAT')">Live Chat</button>
 </div>
 <div class="card">
  <p>❓ FAQ</p>
  <small>এখানে তুমি নিজের প্রশ্ন লিখবে</small>
 </div>
</div>

<!-- TASK -->
<div id="task" class="page">
 <div class="box" onclick="joinChannel()">
  <i class="fa-solid fa-bullhorn"></i>
  <p>চ্যানেল জয়েন</p>
  <b>৪০ টাকা</b>
 </div>

 <div class="grid">
  <!-- 9 ADS -->
  <script>
   for(let i=1;i<=9;i++){
    document.write(`
     <div class="box">
      <i class="fa-solid fa-play"></i>
      <p>Ad ${i}</p>
      <button class="btn" onclick="watchAd()">স্টার্ট</button>
     </div>
    `)
   }
  </script>
 </div>
</div>

<!-- WITHDRAW -->
<div id="withdraw" class="page">
 <div class="card" style="text-align:center">
  <h1 id="mainBal">0</h1>
  <small>TAKA</small>
 </div>

 <div class="card">
  <select id="method">
   <option>bKash</option>
   <option>Nagad</option>
  </select>
  <input id="number" placeholder="নাম্বার">
  <input id="amount" placeholder="Amount">
  <button class="btn" onclick="withdraw()">Withdraw</button>
 </div>
</div>

<!-- NAV -->
<div class="nav">
 <div class="active" onclick="show('home')"><i class="fa fa-home"></i>Home</div>
 <div onclick="show('support')"><i class="fa fa-headset"></i>Support</div>
 <div onclick="show('task')"><i class="fa fa-tasks"></i>Task</div>
 <div onclick="show('withdraw')"><i class="fa fa-wallet"></i>Withdraw</div>
</div>

<script>
/* FIREBASE */
firebase.initializeApp({
 databaseURL:"https://mini-bot-26c78-default-rtdb.firebaseio.com"
});
const db=firebase.database();

/* TELEGRAM */
const tg=Telegram.WebApp;
tg.ready();
const user=tg.initDataUnsafe.user;
const uid=user.id;

/* LOAD */
db.ref("users/"+uid).on("value",s=>{
 let d=s.val()||{balance:0,ads:0,refs:0};
 bal.innerText=d.balance;
 mainBal.innerText=d.balance;
 ads.innerText=d.ads+"/9";
 refs.innerText=d.refs;
 u-name.innerText=user.first_name;
 u-initial.innerText=user.first_name[0];
 refLink.value=`https://t.me/YOUR_BOT?start=${uid}`;
});

/* REFERRAL */
const ref=tg.initDataUnsafe.start_param;
if(ref && ref!=uid){
 db.ref("users/"+uid).once("value",s=>{
  if(s.val()?.referred) return;
  db.ref("users/"+uid).update({balance:25,referred:true});
  db.ref("users/"+ref).once("value",r=>{
   let rd=r.val()||{balance:0,refs:0};
   db.ref("users/"+ref).update({balance:rd.balance+25,refs:rd.refs+1});
  });
 });
}

/* FUNCTIONS */
function show(p){
 document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));
 document.getElementById(p).classList.add('active');
 document.querySelectorAll('.nav div').forEach(x=>x.classList.remove('active'));
 event.currentTarget.classList.add('active');
}

function copyRef(){
 refLink.select();
 document.execCommand("copy");
 tg.showAlert("কপি হয়েছে");
}

function watchAd(){
 db.ref("users/"+uid).once("value",s=>{
  let d=s.val();
  if(d.ads>=9) return tg.showAlert("আজ শেষ");
  db.ref("users/"+uid).update({balance:d.balance+20,ads:d.ads+1});
  tg.showAlert("২০ টাকা যোগ হয়েছে");
 });
}

function joinChannel(){
 window.open("https://t.me/YOUR_CHANNEL");
 db.ref("users/"+uid).once("value",s=>{
  if(s.val()?.joined) return;
  db.ref("users/"+uid).update({balance:s.val().balance+40,joined:true});
 });
}

function withdraw(){
 let a=+amount.value;
 let n=number.value;
 if(!a||!n) return;
 db.ref("users/"+uid).once("value",s=>{
  if(s.val().balance<a) return tg.showAlert("দুঃখিত আপনার পর্যাপ্ত ব্যালেন্স নাই");
  db.ref("users/"+uid).update({balance:s.val().balance-a});
  tg.showAlert("রিকোয়েস্ট সফল");
 });
}

function openLink(l){window.open(l)}
</script>

</body>
</html>
