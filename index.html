<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Money Garden</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<!-- Telegram -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
 font-family:system-ui,-apple-system;
 background:#0b0c1e;
 color:#fff;
 padding-bottom:90px;
}

/* HEADER */
.header{
 background:linear-gradient(135deg,#b86adf,#ff8aa5);
 padding:35px 20px 45px;
 border-radius:0 0 30px 30px;
 text-align:center;
}
.avatar{
 width:72px;height:72px;
 border-radius:50%;
 background:#4cd964;
 margin:0 auto 10px;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:30px;
 font-weight:bold;
}
.balance{
 background:rgba(255,255,255,.25);
 display:inline-block;
 padding:8px 22px;
 border-radius:50px;
 margin-top:10px;
}

/* COMMON */
.container{padding:15px}
.page{display:none}
.page.active{display:block}
.card{
 background:#1c1d38;
 border-radius:20px;
 padding:20px;
 border:1px solid #2d2e4d;
 margin-bottom:15px;
}

/* HOME */
.stat-grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:12px;
}
.stat{
 background:#1c1d38;
 border-radius:18px;
 padding:15px;
 text-align:center;
 border:1px solid #2d2e4d;
}
.stat i{
 font-size:26px;
 background:linear-gradient(135deg,#b86adf,#ff8aa5);
 -webkit-background-clip:text;
 -webkit-text-fill-color:transparent;
}

/* BUTTON */
.btn{
 width:100%;
 padding:14px;
 border:none;
 border-radius:12px;
 background:linear-gradient(90deg,#b86adf,#ff8aa5);
 color:#fff;
 font-weight:bold;
 cursor:pointer;
}

/* TASK */
.play{
 width:75px;height:75px;
 border-radius:50%;
 background:linear-gradient(135deg,#b86adf,#ff8aa5);
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:28px;
 margin:15px auto;
}

/* INPUT */
input,select{
 width:100%;
 padding:14px;
 border-radius:12px;
 border:1px solid #2d2e4d;
 background:#0b0c1e;
 color:#fff;
 margin-bottom:12px;
}

/* NAV */
.nav{
 position:fixed;
 bottom:0;
 width:100%;
 display:flex;
 background:#1c1d38;
 border-top:1px solid #2d2e4d;
}
.nav-item{
 flex:1;
 text-align:center;
 padding:12px 0;
 color:#6e6f8a;
 font-size:12px;
 cursor:pointer;
}
.nav-item.active{color:#b86adf}
.nav-item i{
 display:block;
 font-size:22px;
 margin-bottom:4px;
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
 <div class="avatar" id="u-initial">U</div>
 <h2 id="u-name">User</h2>
 <div class="balance">
  ব্যালেন্স: <span id="top-bal">0.00</span> TK
 </div>
</div>

<div class="container">

<!-- HOME -->
<div id="home" class="page active">
 <div class="stat-grid">
  <div class="stat">
   <i class="fa-solid fa-rectangle-ad"></i><br>
   বিজ্ঞাপন<br>
   <b id="ads-c">0</b>
  </div>
  <div class="stat">
   <i class="fa-solid fa-users"></i><br>
   রেফার<br>
   <b id="refs-c">0</b>
  </div>
 </div>

 <div class="card">
  <h4>রেফার লিংক</h4>
  <input id="ref-url" readonly>
  <button class="btn" id="copyRefBtn">কপি করুন</button>
 </div>
</div>

<!-- SUPPORT -->
<div id="support" class="page">
 <div class="card" style="text-align:center">
  <h3>সাপোর্ট</h3><br>
  <button class="btn" id="tgSupport">
   <i class="fa-brands fa-telegram"></i> Telegram
  </button><br><br>
  <button class="btn" id="mailSupport">
   <i class="fa-solid fa-envelope"></i> Email
  </button>
 </div>
</div>

<!-- TASK -->
<div id="tasks" class="page">
 <div class="card" style="text-align:center">
  <h3>চ্যানেল জয়েন</h3>
  <button class="btn" id="joinChannelBtn">JOIN CHANNEL</button>
 </div>

 <div class="card" style="text-align:center">
  <h3>বিজ্ঞাপন দেখুন</h3>
  <div class="play" id="watchAdBtn">
   <i class="fa-solid fa-play"></i>
  </div>
  <p>প্রতি বিজ্ঞাপনে ২৫ টাকা</p>
 </div>
</div>

<!-- WITHDRAW -->
<div id="withdraw" class="page">
 <div class="card" style="text-align:center">
  <p>মোট ব্যালেন্স</p>
  <h1 id="main-bal">0.00</h1>
  <b>TAKA</b>
 </div>

 <div class="card">
  <select id="w-meth">
   <option>বিকাশ</option>
   <option>নগদ</option>
  </select>
  <input id="w-num" placeholder="আপনার নম্বর">
  <input id="w-amt" placeholder="মিনিমাম ৮০০">
  <button class="btn" id="withdrawBtn">উইথড্র রিকোয়েস্ট</button>
 </div>
</div>

</div>

<!-- NAV -->
<div class="nav">
 <div class="nav-item active" data-page="home">
  <i class="fa-solid fa-house"></i>হোম
 </div>
 <div class="nav-item" data-page="support">
  <i class="fa-solid fa-headset"></i>সাপোর্ট
 </div>
 <div class="nav-item" data-page="tasks">
  <i class="fa-solid fa-tasks"></i>টাস্ক
 </div>
 <div class="nav-item" data-page="withdraw">
  <i class="fa-solid fa-wallet"></i>উইথড্র
 </div>
</div>

<script>
/* ========= CONFIG ========= */
firebase.initializeApp({
 databaseURL:"https://mini-bot-26c78-default-rtdb.firebaseio.com"
});
const db = firebase.database();

const tg = window.Telegram.WebApp;
tg.ready();
const user = tg.initDataUnsafe?.user;
const uid = user ? user.id : "demo";

/* ========= LOAD USER ========= */
db.ref("users/"+uid).on("value",s=>{
 const d = s.val() || {balance:0,ads:0,refs:0};
 document.getElementById("top-bal").innerText = d.balance.toFixed(2);
 document.getElementById("main-bal").innerText = d.balance.toFixed(2);
 document.getElementById("ads-c").innerText = d.ads;
 document.getElementById("refs-c").innerText = d.refs;
 document.getElementById("u-name").innerText = user?.first_name || "User";
 document.getElementById("u-initial").innerText = (user?.first_name || "U")[0];
 document.getElementById("ref-url").value =
  `https://t.me/crypto_passbot/app?startapp=${uid}`;
});

/* ========= NAV FIX ========= */
document.querySelectorAll(".nav-item").forEach(item=>{
 item.addEventListener("click",()=>{
  const page = item.dataset.page;

  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(page).classList.add("active");

  document.querySelectorAll(".nav-item").forEach(n=>n.classList.remove("active"));
  item.classList.add("active");
 });
});

/* ========= ACTIONS ========= */
document.getElementById("copyRefBtn").onclick=()=>{
 document.getElementById("ref-url").select();
 document.execCommand("copy");
 tg.showAlert("লিংক কপি হয়েছে");
};

document.getElementById("tgSupport").onclick=()=>{
 window.open("https://t.me/YourSupportUsername");
};

document.getElementById("mailSupport").onclick=()=>{
 location.href="mailto:support@yourmail.com";
};

document.getElementById("joinChannelBtn").onclick=()=>{
 window.open("https://t.me/YourChannelUsername");
};

document.getElementById("watchAdBtn").onclick=()=>{
 // Monetag / Adsterra Zone এখানে বসাবে
 setTimeout(()=>{
  db.ref("users/"+uid).once("value",s=>{
   const d=s.val();
   db.ref("users/"+uid).update({
    balance:d.balance+25,
    ads:d.ads+1
   });
   tg.showAlert("২৫ টাকা যোগ হয়েছে");
  });
 },5000);
};

document.getElementById("withdrawBtn").onclick=()=>{
 const amt=parseFloat(document.getElementById("w-amt").value);
 const num=document.getElementById("w-num").value;

 if(!amt||!num) return tg.showAlert("সব তথ্য দিন");

 db.ref("users/"+uid).once("value",s=>{
  const bal=s.val().balance;
  if(amt<800) return tg.showAlert("মিনিমাম ৮০০ টাকা");
  if(bal<amt) return tg.showAlert("দুঃখিত আপনার পর্যাপ্ত ব্যালেন্স নেই");

  db.ref("users/"+uid).update({balance:bal-amt});
  tg.showAlert("উইথড্র সফল হয়েছে");
 });
};
</script>

</body>
</html>
