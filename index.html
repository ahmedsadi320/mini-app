<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Money Garden</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<!-- Telegram -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
 font-family:Segoe UI,sans-serif;
 background:#0b0c1e;
 color:#fff;
 padding-bottom:90px;
}

/* HEADER */
.header{
 background:linear-gradient(135deg,#a569bd,#f1948a);
 padding:30px 20px;
 text-align:center;
 border-radius:0 0 30px 30px;
}
.avatar{
 width:70px;height:70px;
 border-radius:50%;
 background:#58d68d;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:28px;
 margin:auto;
}
.badge{
 background:rgba(255,255,255,.3);
 display:inline-block;
 padding:8px 20px;
 border-radius:30px;
 margin-top:10px;
}

/* PAGE */
.page{display:none;padding:15px}
.page.active{display:block}

/* CARD */
.card{
 background:#1c1d38;
 border-radius:18px;
 padding:15px;
 border:1px solid #2d2e4d;
 margin-bottom:15px;
}

/* GRID */
.grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:12px;
}
.box{
 background:#1c1d38;
 border-radius:18px;
 padding:15px;
 text-align:center;
 border:1px solid #2d2e4d;
}
.box i{
 font-size:26px;
 margin-bottom:8px;
 background:linear-gradient(135deg,#bb8fce,#f1948a);
 -webkit-background-clip:text;
 -webkit-text-fill-color:transparent;
}

/* BUTTON */
.btn{
 background:linear-gradient(90deg,#bb8fce,#f1948a);
 border:none;
 width:100%;
 padding:12px;
 border-radius:12px;
 color:#fff;
 font-weight:bold;
 margin-top:10px;
}

/* INPUT */
input,select{
 width:100%;
 padding:14px;
 background:#0b0c1e;
 border:1px solid #2d2e4d;
 border-radius:12px;
 color:#fff;
 margin-bottom:12px;
}

/* NAV */
.nav{
 position:fixed;
 bottom:0;
 width:100%;
 display:flex;
 background:#1c1d38;
 border-top:1px solid #2d2e4d;
}
.nav div{
 flex:1;
 text-align:center;
 padding:10px;
 font-size:12px;
 color:#777;
 cursor:pointer;
}
.nav .active{color:#bb8fce}
.nav i{display:block;font-size:20px;margin-bottom:4px}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
 <div class="avatar" id="uInitial">U</div>
 <h3 id="uName">User</h3>
 <div class="badge">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: <span id="balance">0</span> TK</div>
</div>

<!-- HOME -->
<div id="home" class="page active">
 <div class="grid">
  <div class="box">
   <i class="fa-solid fa-rectangle-ad"></i>
   <p>‡¶¨‡¶ø‡¶ú‡ßç‡¶û‡¶æ‡¶™‡¶®</p>
   <b id="adsCount">0/9</b>
  </div>
  <div class="box">
   <i class="fa-solid fa-users"></i>
   <p>‡¶∞‡ßá‡¶´‡¶æ‡¶∞</p>
   <b id="refsCount">0</b>
  </div>
 </div>

 <div class="card">
  <p>‡¶∞‡ßá‡¶´‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï</p>
  <input id="refLink" readonly>
  <button class="btn" onclick="copyRef()">‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
 </div>
</div>

<!-- SUPPORT -->
<div id="support" class="page">
 <div class="card">
  <button class="btn" onclick="openLink('https://t.me/YOUR_SUPPORT')">Telegram</button>
  <button class="btn" onclick="openLink('mailto:YOURMAIL@gmail.com')">Email</button>
  <button class="btn" onclick="openLink('https://t.me/YOUR_LIVECHAT')">Live Chat</button>
 </div>
 <div class="card">
  <p>‚ùì FAQ</p>
  <small>‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡¶ø‡¶ñ‡¶¨‡ßá</small>
 </div>
</div>

<!-- TASK -->
<div id="task" class="page">
 <div class="box" onclick="joinChannel()">
  <i class="fa-solid fa-bullhorn"></i>
  <p>‡¶ö‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶ú‡ßü‡ßá‡¶®</p>
  <b>‡ß™‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</b>
 </div>

 <div class="grid">
  <!-- 9 ADS -->
  <div class="box"><i class="fa fa-play"></i><p>Ad 1</p><button class="btn" onclick="watchAd()">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü</button></div>
  <div class="box"><i class="fa fa-play"></i><p>Ad 2</p><button class="btn" onclick="watchAd()">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü</button></div>
  <div class="box"><i class="fa fa-play"></i><p>Ad 3</p><button class="btn" onclick="watchAd()">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü</button></div>
  <div class="box"><i class="fa fa-play"></i><p>Ad 4</p><button class="btn" onclick="watchAd()">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü</button></div>
  <div class="box"><i class="fa fa-play"></i><p>Ad 5</p><button class="btn" onclick="watchAd()">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü</button></div>
  <div class="box"><i class="fa fa-play"></i><p>Ad 6</p><button class="btn" onclick="watchAd()">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü</button></div>
  <div class="box"><i class="fa fa-play"></i><p>Ad 7</p><button class="btn" onclick="watchAd()">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü</button></div>
  <div class="box"><i class="fa fa-play"></i><p>Ad 8</p><button class="btn" onclick="watchAd()">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü</button></div>
  <div class="box"><i class="fa fa-play"></i><p>Ad 9</p><button class="btn" onclick="watchAd()">‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü</button></div>
 </div>
</div>

<!-- WITHDRAW -->
<div id="withdraw" class="page">
 <div class="card" style="text-align:center">
  <h1 id="mainBalance">0</h1>
  <small>TAKA</small>
 </div>
 <div class="card">
  <select id="method">
   <option>bKash</option>
   <option>Nagad</option>
  </select>
  <input id="number" placeholder="‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞">
  <input id="amount" placeholder="Amount">
  <button class="btn" onclick="withdraw()">Withdraw</button>
 </div>
</div>

<!-- NAV -->
<div class="nav">
 <div class="active" onclick="showPage('home',this)"><i class="fa fa-home"></i>Home</div>
 <div onclick="showPage('support',this)"><i class="fa fa-headset"></i>Support</div>
 <div onclick="showPage('task',this)"><i class="fa fa-tasks"></i>Task</div>
 <div onclick="showPage('withdraw',this)"><i class="fa fa-wallet"></i>Withdraw</div>
</div>

<script>
/* FIREBASE */
firebase.initializeApp({
 databaseURL:"https://mini-bot-26c78-default-rtdb.firebaseio.com"
});
const db=firebase.database();

/* TELEGRAM */
const tg=Telegram.WebApp;
tg.ready();
const user=tg.initDataUnsafe.user;
const uid=user.id;

/* LOAD USER */
db.ref("users/"+uid).on("value",s=>{
 let d=s.val()||{balance:0,ads:0,refs:0};
 balance.innerText=d.balance;
 mainBalance.innerText=d.balance;
 adsCount.innerText=d.ads+"/9";
 refsCount.innerText=d.refs;
 uName.innerText=user.first_name;
 uInitial.innerText=user.first_name[0];
 refLink.value=`https://t.me/YOUR_BOT?start=${uid}`;
});

/* REFERRAL */
const ref=tg.initDataUnsafe.start_param;
if(ref && ref!=uid){
 db.ref("users/"+uid).once("value",s=>{
  if(s.val()?.referred) return;
  db.ref("users/"+uid).update({balance:25,referred:true});
  db.ref("users/"+ref).once("value",r=>{
   let rd=r.val()||{balance:0,refs:0};
   db.ref("users/"+ref).update({balance:rd.balance+25,refs:rd.refs+1});
  });
 });
}

/* NAV */
function showPage(p,el){
 document.querySelectorAll(".page").forEach(x=>x.classList.remove("active"));
 document.getElementById(p).classList.add("active");
 document.querySelectorAll(".nav div").forEach(x=>x.classList.remove("active"));
 el.classList.add("active");
}

/* UTIL */
function openLink(l){window.open(l)}
function copyRef(){
 refLink.select();
 document.execCommand("copy");
 tg.showAlert("‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá");
}

/* AD SECTION
üëâ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá‡¶á ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ Adsterra / Monetag link ‡¶¨‡¶∏‡¶æ‡¶¨‡ßá
*/
function watchAd(){
 // ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£:
 // window.open("https://YOUR_AD_LINK","_blank");

 setTimeout(()=>{
  db.ref("users/"+uid).once("value",s=>{
   let d=s.val();
   if(d.ads>=9) return tg.showAlert("‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶è‡¶° ‡¶∂‡ßá‡¶∑");
   db.ref("users/"+uid).update({
    balance:d.balance+20,
    ads:d.ads+1
   });
   tg.showAlert("‡ß®‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá");
  });
 },8000);
}

/* CHANNEL */
function joinChannel(){
 window.open("https://t.me/YOUR_CHANNEL","_blank");
 db.ref("users/"+uid).once("value",s=>{
  if(s.val()?.joined) return;
  db.ref("users/"+uid).update({
   balance:s.val().balance+40,
   joined:true
  });
  tg.showAlert("‡ß™‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá");
 });
}

/* WITHDRAW */
function withdraw(){
 let a=+amount.value;
 let n=number.value;
 if(!a||!n) return tg.showAlert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®");
 db.ref("users/"+uid).once("value",s=>{
  let bal=s.val().balance;
  if(bal<a) return tg.showAlert("‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶§ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡¶æ‡¶á");
  db.ref("users/"+uid).update({balance:bal-a});
  tg.showAlert("‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶∏‡¶´‡¶≤");
 });
}
</script>

</body>
</html>
